<!DOCTYPE html>
<html lang = 'en'></html>
<head>
<title>Xenoblade Cookie Clicker Clone</title>
<link rel = "stylesheet" href = "index.css">
<script src="NPCAI.js"></script> 
</head>
<body>
<header>
    
    <p> Credits</p>
</header>
<div class="MainGame">
    <div class="Shop">
        <div>
            <img src = "images/Dunban.png" class="Character" id="Dunban" onclick="PurchaseCharacter(this)">
            <p id = "dunbanPoints"> 400 Points</p>
        </div>
        <div>
            <img src = "images/Melia.png" class="Character" id="Melia" onclick="PurchaseCharacter(this)">
            <p id = "meliaPoints"> 200 Points</p>
            
        </div>
        <div>
            <img src = "images/Reyn.png" class="Character" id="Reyn" onclick="PurchaseCharacter(this)">
            <p id = "reynPoints"> 50 Points</p>
        </div>
    </div>
    <div class="Score">
        <p id="Score">Score: 0</p>
    </div>
    <img src="images/Colony9Background.jpg" width="100%"; height = "80%">
    <div class="Content">
        <img src="images/mechon1.png" id="Enemy"; onclick="RegisterHit()" width="190%">
        
    </div>
    <div class = "Effects">
        <img src = "effects/Lightning_Effect.gif" id = "lightning" style="display: none;">
       
    </div>
    <div class = "Effects">
        <img src = "effects/fire-effect.gif" id = "fire" style="margin-left: 180px; margin-top: 90px; display: none;">
    </div>
    <div class = "Effects">
        <img src = "effects/Punch-effect.gif" id = "punch" style="margin-left: 120px; margin-top: 50px; display: none;">
       
    </div>
    <div class = "Effects">
        <img src = "effects/slash.gif" id = "slash" style="margin-left: 160px; margin-top:60px; display: none;">
    </div>
    
    
   
    
  
</div>
</body>
<script>
    var enemy = document.getElementById("Enemy");
    var scoreElement = document.getElementById("Score")
    var reyn = document.getElementById("Reyn")
    var melia = document.getElementById("Melia")
    var dunban = document.getElementById("Dunban")
    var reynPoints = 50;
    var reynPointEle = document.getElementById("reynPoints")
    var meliaPoints = 200;
    var meliaPointEle = document.getElementById("meliaPoints")
    var dunbanPoints = 400;
    var dunbanPointsEle = document.getElementById("dunbanPoints")
    var score = 0;
    var cooldown = 20;
    var Dunban_Bought = false;
    var Melia_Bought = false;
    var Reyn_Bought = false;
    var reynSound = new Sound("sounds/reyn_entrance.wav")
    var dunbanSound = new Sound("sounds/DunbanEntrance.wav")
    var meliaSound = new Sound("sounds/MeliaEntrance.wav")
    var ReynCooldown = 5000
    var MeliaCooldown = 50000
    var DunbanCooldown = 80000
    var backgroundMusic= new Sound("sounds/background.mp3")
    var enemyHit = new Sound("sounds/EnemyHit.mp3")
    var fireEffect = document.getElementById("fire");
    var lightningEffect = document.getElementById("lightning")
    var punchEffect = document.getElementById("punch")
    var slashEffect = document.getElementById("slash")
    setInterval(DunbanAttack,DunbanCooldown);
    setInterval(MeliaAttack, MeliaCooldown);
    setInterval(ReynAttack, ReynCooldown);
    
    function ReynAttack(){
        if (Reyn_Bought == true){
           
           UpdateScore(reynMoves())
           punchEffect.style.display = "inline"
           setTimeout(function(){
           punchEffect.style.display = "none"

           },2000)
          
       }

    }
    function MeliaAttack(){
        if(Melia_Bought == true){
           
           UpdateScore(MeliaMoves())
       }

    }
    function DunbanAttack(){
       
        if(Dunban_Bought==true){
            UpdateScore(DunbanMoves())
        }
    } 
    function PurchaseCharacter(chr){
        if(chr.id == "Reyn"){
            if(score>= reynPoints){
                Reyn_Bought = true;
                console.log("bought")
                reynSound.play();
                UpdateScore(reynPoints*-1)
                reynPointEle.innerHTML = "xxx"
            }
            else{
                alert("Not enough points")
            }
        }
        if(chr.id == "Melia"){
            if(score>= meliaPoints){
                Melia_Bought = true;
                UpdateScore(meliaPoints*-1)
                meliaSound.play();
                
                meliaPointEle.innerHTML= "xxx"
            }
            else{
                alert("Not enough points")
            }
        }
        if (chr.id == "Dunban"){
            if(score>= dunbanPoints){
                Dunban_Bought = true;
                dunbanSound.play();
                UpdateScore(dunbanPoints*-1)
                dunbanPointsEle.innerHTML = "xxx" // could replace this with a cooldown timer
            }
            else{
                alert("Not enough points")
            }
           
        }
        
    }
    function RegisterHit(){
        backgroundMusic.play();
        if(enemy.className == 'HitAnimation'){
            enemy.className= 'HitAnimationAlt'
        }
        else{
            enemy.className= 'HitAnimation';
        }
        UpdateScore(1)
        enemyHit.play();
        
    }
    function UpdateScore(points){
        score+= points
        scoreElement.innerHTML = "Score: "+ score;

    }
    
 </script>